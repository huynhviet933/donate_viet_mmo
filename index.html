<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Donate Viet MMo</title>
<style>
  body { margin:0; padding:0; font-family:sans-serif; background:#f7f7f7; }
  .header { background:#ffb300; padding:20px; font-size:26px; text-align:center; color:#fff; }
  .wrapper { max-width:650px; margin:30px auto; background:#fff; padding:25px; border-radius:14px; }
  .box { display:flex; flex-wrap:wrap; gap:12px; margin-top:12px; }
  .btn { flex:1; min-width:120px; padding:14px 0; border:none; background:#e0e0e0; border-radius:10px; font-size:18px; cursor:pointer; }
  .btn.active { background:#4caf50; color:#fff; }
  #qrBox { margin-top:25px; text-align:center; display:none; }
  #qrImg { width:240px; height:240px; }
</style>
</head>
<body>

<div class="header">Donate Viet MMo - Tools</div>

<div class="wrapper">

  <h3>Chọn Network</h3>
  <div class="box" id="networkBox"></div>

  <button class="btn" style="width:100%; margin-top:20px;" onclick="generateQR()">Tạo QR</button>

  <div id="qrBox">
    <h3>Scan để nhận địa chỉ ví</h3>
    <img id="qrImg" />
    <p id="qrText"></p>
  </div>

</div>

<script>
const networks = ["BNB", "Polygon", "ETH", "ARB", "TRX", "SOL", "TON", "APTOS"];

const wallets = {
  BNB:"0x4bAADCd4AB4Df11D121F1662e048Dd84261c40b2",
  Polygon:"0x4bAADCd4AB4Df11D121F1662e048Dd84261c40b2",
  ETH:"0x4bAADCd4AB4Df11D121F1662e048Dd84261c40b2",
  ARB:"0x4bAADCd4AB4Df11D121F1662e048Dd84261c40b2",
  TRX:"TPhcXjHrg22kvv7jKKMrhPhBr167FFV8vN",
  SOL:"FBf5yRzFzXhi447mKNKCRedV2jVbsmmF6iRdgi3MLmga",
  TON:"UQDGarW35S8X03zr6vn-iKEoh5as69d7Ar-xU91kORsF2lLn",
  APTOS:"0x64e46626b1213e3c0e66e733a014f4d453e322e20a0630dd428ef8e6058ae0df"
};

let selNet = null;

// Render networks
networks.forEach(net=>{
  const b=document.createElement("button");
  b.className="btn"; b.innerText=net;
  b.onclick=()=>{ selNet=net; setActive('#networkBox', b); };
  networkBox.appendChild(b);
});

function setActive(parent, btn){
  document.querySelectorAll(parent+" .btn").forEach(x=>x.classList.remove('active'));
  btn.classList.add('active');
}

// Create QR with only wallet address
function generateQR(){
  if(!selNet){
    alert("Vui lòng chọn network.");
    return;
  }

  const addr = wallets[selNet];
  let uri="";

  // Schema chuẩn nhất OKX + tất cả ví hỗ trợ:
  if(["BNB","Polygon","ETH","ARB"].includes(selNet))
    uri = `ethereum:${addr}`;
  if(selNet==="TRX") uri = `tron:${addr}`;
  if(selNet==="SOL") uri = `solana:${addr}`;
  if(selNet==="TON") uri = `ton:${addr}`;
  if(selNet==="APTOS") uri = `aptos:${addr}`;

  const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(uri)}`;

  qrImg.src = qrUrl;
  qrText.innerText = addr;
  qrBox.style.display="block";
}
</script>
</body>
</html>
